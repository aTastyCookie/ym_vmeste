jQuery.cookie=function(t,e,n){if("undefined"==typeof e){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){i=decodeURIComponent(r.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n.expires=-1);var a="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date,c.setTime(c.getTime()+24*n.expires*60*60*1e3)):c=n.expires,a="; expires="+c.toUTCString()}var u=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,u,l,h].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return i[t]||t})}function n(t,n){var i="";try{i=t(n)}catch(o){try{i=t(e(n))}catch(o){i=n}}return i}var i={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return n(decodeURI,t)},decodeURIComponent:function(t){return n(decodeURIComponent,t)}})}(jQuery),function(t){function e(e,i,o){var r=!1;if(s){var a=[];t.each(c,function(){o.hasOwnProperty(this)&&(r=!0)&&a.push({name:this,val:o[this]})}),r&&(t.each(o,function(t){a.push({name:t,val:this})}),o=a)}t.each(o,function(o,s){if(r&&(o=s.name,s=s.val),t.isFunction(s)&&(!n||s.toString().indexOf(".__base")>-1)){var a=e[o]||function(){};i[o]=function(){var t=this.__base;this.__base=a;var e=s.apply(this,arguments);return this.__base=t,e}}else i[o]=s})}var n=function(){"_"}.toString().indexOf("_")>-1,i=function(){},o=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=!0,r={toString:""};for(var a in r)r.hasOwnProperty(a)&&(s=!1);var c=s?["toString","valueOf"]:null;t.inherit=function(){var n=arguments,s=t.isFunction(n[0]),r=s?n[0]:i,a=n[s?1:0]||{},c=n[s?2:1],u=a.__constructor||s&&r.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!s)return u.prototype=a,u.prototype.__self=u.prototype.constructor=u,t.extend(u,c);t.extend(u,r);var l=r.prototype,h=u.prototype=o(l);return h.__self=h.constructor=u,e(l,h,a),c&&e(r,u,c),u},t.inheritSelf=function(t,n,i){var o=t.prototype;return e(o,o,n),i&&e(t,t,i),t}}(jQuery),function(t){var e=0,n="__"+ +new Date,i=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return i();var o="uniqueID"in t?"uniqueID":n;return e||o in t?t[o]:t[o]=i()}}(jQuery),function(t){t.isEmptyObject||(t.isEmptyObject=function(t){for(var e in t)return!1;return!0})}(jQuery),function(t){t.extend({debounce:function(t,e,n,i){3==arguments.length&&"boolean"!=typeof n&&(i=n,n=!1);var o;return function(){var s=arguments;i=i||this,n&&!o&&t.apply(i,s),clearTimeout(o),o=setTimeout(function(){n||t.apply(i,s),o=null},e)}},throttle:function(t,e,n){var i,o,s;return function(){o=arguments,s=!0,n=n||this,i||function(){s?(t.apply(n,o),s=!1,i=setTimeout(arguments.callee,e)):i=null}()}}})}(jQuery),function(t){var e="__"+ +new Date+"storage",n=function(e,n){return t.identify(e)+(n?t.identify(n):"")},i={buildEventName:function(t){return t},on:function(i,o,s,r,a){if("string"==typeof i){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var c,u=n(s,r),l=this[e]||(this[e]={}),h=i.split(" "),d=0;i=h[d++];)if(i=this.buildEventName(i),c=l[i]||(l[i]={ids:{},list:{}}),!(u in c.ids)){var f=c.list,p={fn:s,data:o,ctx:r,special:a};f.last?(f.last.next=p,p.prev=f.last):f.first=p,c.ids[u]=f.last=p}}else{var m=this;t.each(i,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,n,i){return this.on(t,e,n,i,{one:!0})},un:function(i,o,s){if("string"==typeof i||"undefined"==typeof i){var r=this[e];if(r)if(i){for(var a,c=i.split(" "),u=0;i=c[u++];)if(i=this.buildEventName(i),a=r[i])if(o){var l=n(o,s),h=a.ids;if(l in h){var d=a.list,f=h[l],p=f.prev,m=f.next;p?p.next=m:f===d.first&&(d.first=m),m?m.prev=p:f===d.last&&(d.last=p),delete h[l]}}else delete this[e][i]}else delete this[e]}else{var _=this;t.each(i,function(t,e){_.un(t,e,s)})}return this},trigger:function(n,i){var o,s=this,r=s[e];if("string"==typeof n?n=t.Event(s.buildEventName(o=n)):n.type=s.buildEventName(o=n.type),n.target||(n.target=s),r&&(r=r[n.type]))for(var a,c=r.list.first;c;)n.data=c.data,a=c.fn.call(c.ctx||s,n,i),"undefined"!=typeof a&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())),c.special&&c.special.one&&s.un(o,c.fn,c.ctx),c=c.next;return this}};t.observable=t.inherit(i,i)}(jQuery),function(t,e){function n(t,e,n){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(n?"_"+n:"")}function i(e,i,o){t.isFunction(e)?i[n(o,"*","*")]=e:t.each(e,function(e,s){t.isFunction(s)?i[n(o,e,"*")]=s:t.each(s,function(t,s){i[n(o,e,t)]=s})})}function o(t,e){return e?Array.isArray(e)?function(n){for(var i=0,o=e.length;o>i;)if(n.hasMod(t,e[i++]))return!0;return!1}:function(n){return n.hasMod(t,e)}:function(e){return e.hasMod(t)}}var s=[],r={},a={};this.BEM=t.inherit(t.observable,{__constructor:function(t,e,n){var i=this;i._modCache=t||{},i._processingMods={},i._params=e,i.params=null,n!==!1?i._init():i.afterCurrentEvent(function(){i._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(this.changeThis(t,e))},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).__self.trigger(t,e),this},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,n,i){var o=arguments.length,s=!1;1==o?(i="",n=t,t=e,s=!0):2==o&&("string"==typeof t?(i=n,n=t,t=e):(i="",s=!0));var r=this.getMod(t,n)===i;return s?!r:r},getMod:function(t,e){var n=typeof t;if("string"===n||"undefined"===n){e=t||e;var i=this._modCache;return e in i?i[e]:i[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,n){return this._extractModVal(t,e,n)},getMods:function(t){var n=t&&"string"!=typeof t,i=this,o=[].slice.call(arguments,n?1:0),s=i._extractMods(o,n?t:e);return n||(o.length?o.forEach(function(t){i._modCache[t]=s[t]}):i._modCache=s),s},setMod:function(n,i,o){"undefined"==typeof o&&(o=i,i=n,n=e);var s=this;if(!n||n[0]){var r=(n&&n[0]?t.identify(n[0]):"")+"_"+i;if(this._processingMods[r])return s;var a,c=n?s._getElemMod(i,n,a=s.__self._extractElemNameFrom(n)):s.getMod(i);if(c===o)return s;this._processingMods[r]=!0;var u=!0,l=[i,o,c];n&&l.unshift(n),[["*","*"],[i,"*"],[i,o]].forEach(function(t){u=s._callModFn(a,t[0],t[1],l)!==!1&&u}),!n&&u&&(s._modCache[i]=o),u&&s._afterSetMod(i,o,c,n,a),delete this._processingMods[r]}return s},_afterSetMod:function(){},toggleMod:function(t,n,i,o,s){"string"==typeof t&&(s=o,o=i,i=n,n=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(s=o,o="");var r=this.getMod(t,n);return(r==i||r==o)&&this.setMod(t,n,"boolean"==typeof s?s?i:o:this.hasMod(t,n,i)?o:i),this},delMod:function(t,n){return n||(n=t,t=e),this.setMod(t,n,"")},_callModFn:function(t,i,o,s){var r=n(t,i,o);return this[r]?this[r].apply(this,s):e},_extractModVal:function(){return""},_extractMods:function(){return{}},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){}},{_name:"i-bem",blocks:r,decl:function(n,s,a){if("string"==typeof n?n={block:n}:n.name&&(n.block=n.name),n.baseBlock&&!r[n.baseBlock])throw'baseBlock "'+n.baseBlock+'" for "'+n.block+'" is undefined';s||(s={}),s.onSetMod&&(i(s.onSetMod,s),delete s.onSetMod),s.onElemSetMod&&(t.each(s.onElemSetMod,function(t,e){i(e,s,t)}),delete s.onElemSetMod);var c=r[n.baseBlock||n.block]||this;if(n.modName){var u=o(n.modName,n.modVal);t.each(s,function(n,i){t.isFunction(i)&&(s[n]=function(){var t;if(u(this))t=i;else{var o=c.prototype[n];o&&o!==s[n]&&(t=this.__base)}return t?t.apply(this,arguments):e})})}if(a&&"boolean"==typeof a.live){var l=a.live;a.live=function(){return l}}var h;return n.block==c._name?(h=t.inheritSelf(c,s,a))._processLive(!0):((h=r[n.block]=t.inherit(c,s,a))._name=n.block,delete h._liveInitable),h},_processLive:function(){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new r[t.block](t.mods,e)},getName:function(){return this._name},_extractElemNameFrom:function(){},afterCurrentEvent:function(t,e){1==s.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=s.length;if(t)for(var e,n=s.splice(0,t);e=n.shift();)e.fn.call(e.ctx||this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,n=e?0:1,i=arguments.length;for(e&&(t=this);i>n;)delete t[arguments[n++]];return this},channel:function(n,i){return"boolean"==typeof n&&(i=n,n=e),n||(n="default"),i?void(a[n]&&(a[n].un(),delete a[n])):a[n]||(a[n]=new t.observable)}})}(jQuery),function(){Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e})}(),function(){var t=Array.prototype,e=Object.prototype.toString,n={indexOf:function(t,e){e=+(e||0);var n=this,i=n.length;if(i>0&&i>e)for(e=0>e?Math.ceil(e):Math.floor(e),-i>e&&(e=0),0>e&&(e+=i);i>e;){if(e in n&&n[e]===t)return e;++e}return-1},forEach:function(t,e){for(var n=-1,i=this,o=i.length;++n<o;)n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i))},map:function(t,e){for(var n=-1,i=this,o=i.length,s=new Array(o);++n<o;)n in i&&(s[n]=e?t.call(e,i[n],n,i):t(i[n],n,i));return s},filter:function(t,e){for(var n=-1,i=this,o=i.length,s=[];++n<o;)n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i))&&s.push(i[n]);return s},reduce:function(t,e){var n,i=-1,o=this,s=o.length;if(arguments.length<2){for(;++i<s;)if(i in o){n=o[i];break}}else n=e;for(;++i<s;)i in o&&(n=t(n,o[i],i,o));return n},some:function(t,e){for(var n=-1,i=this,o=i.length;++n<o;)if(n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i)))return!0;return!1},every:function(t,e){for(var n=-1,i=this,o=i.length;++n<o;)if(n in i&&!(e?t.call(e,i[n],n,i):t(i[n],n,i)))return!1;return!0}};for(var i in n)t[i]||(t[i]=n[i]);Array.isArray||(Array.isArray=function(t){return"[object Array]"===e.call(t)})}(),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var n=this,i=t.call(arguments,1);return function(){return n.apply(e,i.concat(t.call(arguments)))}})}(),function(t,e,n){function i(t,e,n){n.push(r,t,r,e)}function o(t,e,n,o){o.push(t),n&&i(e,n,o)}function s(t,e,s,r,c){o(t,n,n,c),c.push(a,e),r&&i(s,r,c)}var r="_",a="__",c="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:c,MOD_DELIM:r,ELEM_DELIM:a,buildModPostfix:function(t,e,n){var o=n||[];return i(t,e,o),n?o:o.join("")},buildClass:function(t,e,i,r,a){var c=typeof i;if("string"==c?"string"!=typeof r&&"number"!=typeof r&&(a=r,r=i,i=e,e=n):"undefined"!=c?(a=i,i=n):e&&"string"!=typeof e&&(a=e,e=n),!(e||i||a))return t;var u=a||[];return e?s(t,e,i,r,u):o(t,i,r,u),a?u:u.join("")},buildClasses:function(t,i,r,a){i&&"string"!=typeof i&&(a=r,r=i,i=n);var c=a||[];return i?s(t,i,n,n,c):o(t,n,n,c),r&&e.each(r,function(e,n){n&&(c.push(" "),i?s(t,i,e,n,c):o(t,e,n,c))}),a?c:c.join("")}}}(BEM,jQuery),function(t){function e(t){return t.replace(/^(?:https?:)?\/\//,"")}t||(t=window.Lego={}),!t.params&&(t.params={}),t.c=function(t,n,i){var o=e(i&&i.host||BEM.blocks["i-global"].param("click-host")||"clck.yandex.ru"),s=function(t,e,n,i){return e=e.replace("'","%27"),e.indexOf("/dtype=")>-1?e:location.protocol+"//"+o+"/"+n+"/dtype="+t+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+(i?"/*"+(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e)):"/*data="+encodeURIComponent("url="+encodeURIComponent(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e))))},r=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],n=document.createElement("script");n.setAttribute("src",s(t,location.href,"jclck")),e.insertBefore(n,e.firstChild)};if(n)if(n.className.match(/b-link_pseudo_yes/)||n.href&&n.href.match(/^mailto:/)||i&&i.noRedirect===!0)r();else if(n.href){var a=n.href;n.href=s(t,a,"redir"),setTimeout(function(){n.href=a},500)}else if(n.form)if(n.type.match(/submit|button|image/)){var a=n.form.action;n.form.action=s(t,a,"redir",!0),setTimeout(function(){n.form.action=a},500)}else r();else{if(!n.action)throw"counter.js: not link and not form!";n.action=s(t,n.action,"redir",!0)}else r()}}(window.Lego),function(t,e){t||(t=window.Lego={}),t.cp=function(n,i,o,s,r,a){"string"==typeof s||(a=r,r=s,s=e),t.c("stred/pid="+n+"/cid="+i+(o?"/path="+o+(s?"/vars="+s:""):""),r,a)}}(window.Lego),function(t){t||(t=window.Lego={}),t.ch=function(e,n,i){BEM.blocks["i-global"].param("show-counters")&&t.cp(0,2219,e,n,i)}}(window.Lego),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var n=e.indexOf(t+"=");if(-1==n)return!1;n+=t.length+1;var i=e.indexOf(";",n);return decodeURIComponent(-1==i?e.substring(n):e.substring(n,i))}}(window.Lego),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return!!t.getCookie("yandex_login")}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(n){return(n=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"//passport.yandex.ru","pass-host":"//pass.yandex.ru","passport-msg":n.id,"social-host":"//social.yandex.ru","lego-path":"/lego","show-counters-percent":100},n,e.params))["show-counters"]=Math.round(100*Math.random())<=n["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},n),t(function(){n.oframebust&&e.oframebust(n.oframebust)}),n}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(n,i){n=n||document,i=i||".g-js",t(n).find(i).each(function(){var n=t(this),i=this.onclick?this.onclick():{},o=i.name||"",s=e.block[o];s&&!n.data(o)&&(s.call(n,i),n.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=!!t(document).ready(function(){e.blockInit()}))}(jQuery,window.Lego),function(t,e,n){function i(t,e,n){(t[e]||(t[e]=[])).unshift(n)}function o(t,e){return e.modName?function(n){(n._curBlock.mods||{})[e.modName]===e.modVal&&t(n)}:t}function s(t,n){var i,o=e.isArray(n);return e.isArray(t)?o?i=t.concat(n):(i=t).push(n):o?(i=n).unshift(t):i=[t,n],i}function r(t){return t.replace(p,function(t){return f[t]})}var a=t.INTERNAL,c=a.ELEM_DELIM,u={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},l=a.buildClass,h=a.buildClasses,d={},f={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},p=/["&<>]/g;t.HTML={decl:function(t,n){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var s=d[t.block]||(d[t.block]={});n.onBlock&&i(s,"_block",o(n.onBlock,t)),n.onElem&&(e.isFunction(n.onElem)?i(s,"_elem",o(n.onElem,t)):e.each(n.onElem,function(e,n){i(s,"_elem"+("*"===e?"":c+e),o(n,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=n},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,e)},param:function(t,n,i,o){var s=this,r=s._params;return"undefined"==typeof n?r[t]:(!i&&t in r?o&&(r[t]=e.extend(n,r[t])):r[t]=n,s)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.attrs||{})[t];var o=i._params.attrs;return o?(n||!(t in o))&&(o[t]=e):(i._params.attrs={})[t]=e,i},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.mods||{})[t];var o=i._params.mods;return o?(n||!(t in o))&&(o[t]=e):(i._params.mods={})[t]=e,i},mix:function(t,e){var n=this,i=n._params;return"undefined"==typeof t?i.mix:(i.mix=!e&&"mix"in i?i.mix.concat(t):t,n)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,n=e._params;return t.content=n.content,n.content=t,e},beforeContent:function(t){var e=this,n=e._params;return n.content=s(t,n.content),e},afterContent:function(t){var e=this,n=e._params;return n.content=s(n.content,t),e},wrap:function(t){var e=this,n=e._params;return t.block||(t._curBlock=e._curBlock),t.content=n._wrapper?n._wrapper:n,n._wrapper=t,e},tParam:function(t,e){var n=this,i=n._tParams||(n._tParams={});if("undefined"==typeof e)return i[t];var o=n._tParamsChanges||(n._tParamsChanges={});return t in o||(o[t]=i[t]),i[t]=e,n},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,n=t._buffer,i=t._params,o=typeof i;if("string"==o||"number"==o)n.push(i);else if(e.isArray(i))for(var s,r,a=0,c=i.length;c>a;)t._params=s=i[a++],r=typeof s,"string"==r||"number"==r?n.push(s):s&&(s._pos=a,s._siblingsCount=c,t._buildByDecl());else i&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,n=this,i=n._buffer,o=n._params,s=o.tag||"div",a=o.block||o.elem,c=a&&(o.block||n._curBlock.block),d=!1;o.js&&((t={})[l(c,o.elem)]=o.js===!0?{}:o.js,d=!o.elem),i.push("<",s),(a||o.cls)&&(i.push(' class="'),a&&(h(c,o.elem,o.mods,i),o.mix&&e.each(o.mix,function(e,n){n&&(i.push(" "),h(n.block,n.elem,n.mods,i),n.js&&((t||(t={}))[l(n.block,n.elem)]=n.js===!0?{}:n.js,d||(d=!n.elem)))})),o.cls&&i.push(a?" ":"",o.cls),d&&i.push(" i-bem"),i.push('"')),t&&i.push(' onclick="return ',r(JSON.stringify(t)),'"'),o.attrs&&e.each(o.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&i.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),u[s]?i.push("/>"):(i.push(">"),"undefined"!=typeof o.content&&(n._params=o.content,n._buildAll()),i.push("</",s,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,n=t._curBlock,i=t._params;if(i._curBlock&&(t._curBlock=i._curBlock),i.block&&(t._curBlock=i),!i._wrapper){if(i.block||i.elem){var o=d[t._curBlock.block];if(o){var s;if(i.elem?(s=o["_elem"+c+i.elem],o._elem&&(s=s?s.concat(o._elem):o._elem)):s=o._block,s)for(var r,a=0;(r=s[a++])&&(r(t),!i._isStopped););}}if(i._wrapper)return i._curBlock=t._curBlock,t._params=i._wrapper,t._buildAll()}var u=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=n,u){var l=t._tParams;e.each(u,function(t,e){"undefined"==typeof e?delete l[t]:l[t]=e})}}})}}(BEM,jQuery),function(t){if(!window.JSON){var e,n=Object.prototype.toString,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};window.JSON={stringify:e=function(s){if(null===s)return"null";if("undefined"==typeof s)return t;switch(n.call(s)){case"[object String]":return i.lastIndex=0,'"'+(i.test(s)?s.replace(i,function(t){var e=o[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):s)+'"';case"[object Number]":case"[object Boolean]":return""+s;case"[object Array]":for(var r,a="[",c=0,u=s.length;u>c;)r=e(s[c]),a+=(c++?",":"")+("undefined"==typeof r?"null":r);return a+"]";case"[object Object]":if("[object Function]"===n.call(s.toJSON))return e(s.toJSON());var r,a="{",c=0;for(var l in s)s.hasOwnProperty(l)&&(r=e(s[l]),"undefined"!=typeof r&&(a+=(c++?",":"")+'"'+l+'":'+r));return a+"}";default:return t}},parse:function(t){return Function("return "+t)()}}}}(),function(t){t||(t=window.Lego={}),t.messages=t.messages||{},t.message=function(e,n){return"ru"==t.params.locale?n:t.messages[e]||n}}(window.Lego),function(t,e,n){function i(t,n){var i=t[0];e.each(a(i),function(r,a){s(a,i,r,n);var c=p[a.uniqId];c?c.domElem.index(i)<0&&(c.domElem=c.domElem.add(t),e.extend(c._params,a)):o(r,t,a)})}function o(t,i,o,r,c){"boolean"==typeof o&&(c=r,r=o,o=n);var u=i[0];o=s(o||a(u)[t],u,t);var l=o.uniqId;if(p[l])return p[l]._init();f[l]=f[l]?f[l].add(i):i;var h=u.parentNode;h&&11!==h.nodeType||e.unique(f[l]);var d=v[t]||C.decl(t,{},{live:!0});if(!(d._liveInitable=!!d._processLive())||r||o.live===!1){r&&i.addClass("i-bem");var m=new d(f[l],o,!!r);return delete f[l],c&&c.apply(m,B.call(arguments,4)),m}}function s(t,n,i,o){(t||(t={})).uniqId||(t.uniqId=(t.id?i+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(n),r=m[s]||(m[s]={});return r[i]||(r[i]=t),t}function r(t,e,n){var i=t.find(e);return n?i:i.add(t.filter(e))}function a(t){var n=e.identify(t);return m[n]||(m[n]=c(t))}function c(t){var n,i,o=t.getAttribute("data-bem");return o?JSON.parse(o):(n=t.onclick||t.ondblclick,n||"body"!=t.tagName.toLowerCase()||(i=e(t),o=i.attr("onclick")||i.attr("ondblclick"),o&&(n=Function(o))),n?n():{})}function u(t){delete m[e.identify(t)]}function l(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),f={},p={},m={},_={},g={},v=t.blocks,b=t.INTERNAL,y=b.NAME_PATTERN,M=b.MOD_DELIM,E=b.ELEM_DELIM,k=b.buildModPostfix,w=b.buildClass,B=Array.prototype.slice,x=Array.prototype.reverse;e.fn.bem=function(t,e){return o(t,this,e,!0)};var C=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,n,i){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},p[o._uniqId=n.uniqId||e.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,n,i)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){return this._findBlocks("find",t,e,!0)},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,i,s,r){if(!this.domElem)return[];s||(s=i,i=n);var a=i?"string"==typeof i?this.findElem(i):i:this.domElem,c="string"==typeof s,u=c?s:s.block||s.blockName,l="."+(c?w(u):w(u,s.modName,s.modVal))+(r?":first":""),h=a.filter(l);if(t&&(h=h.add(a[t](l))),r)return h[0]?o(u,h.eq(0),!0):null;var d=[],f={};return e.each(h,function(t,n){var i=o(u,e(n),!0);f[i._uniqId]||(f[i._uniqId]=!0,d.push(i))}),d},bindToDomElem:function(t,n,i){var o=this;return i?t.bind(o._buildEventName(n),function(t){return(t.data||(t.data={})).domElem=e(this),i.apply(o,arguments)}):e.each(n,function(e,n){o.bindToDomElem(t,e,n)}),o},bindToDoc:function(t,e){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e)},bindToWin:function(t,e){var n,i,o=e;return"resize"===t&&(e=function(){var t=h.height(),e=h.width();(n!==t||i!==e)&&(n=t,i=e,o.apply(this,arguments))}),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,e)},bindTo:function(t,n,i){return!n||e.isFunction(n)?(i=n,n=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,n,i)},unbindFromDomElem:function(t,e){return t.unbind(this._buildEventName(e)),this},unbindFromDoc:function(t){return this.unbindFromDomElem(d,t)},unbindFromWin:function(t){return this.unbindFromDomElem(h,t)},unbindFrom:function(t,e){return e?"string"==typeof t&&(t=this.elem(t)):(e=t,t=this.domElem),this.unbindFromDomElem(t,e)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this,n=e._eventNameCache;if(t in n)return n[t];var i="."+e._uniqId;if(t.indexOf(".")<0)return n[t]=t+i;var o=".bem_"+e.__self._name;return n[t]=t.split(".").map(function(t,e){return 0==e?t+o:o+"_"+t}).join("")+i},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).domElem&&this._ctxTrigger(t,e),this},_ctxTrigger:function(t,n){var i=this,o=_[i.__self._buildCtxEventName(t.type)],s={};o&&i.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var c=e.identify(r,!0);if(c){if(s[c])break;var u=o.ctxs[c];u&&(e.each(u,function(e,o){o.fn.call(o.ctx||i,t,n)}),a--),s[c]=!0}r=r.parentNode}})},setMod:function(t,n,i){if(t&&"undefined"!=typeof i&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,n,i)}),o}return this.__base(t,n,i)},_extractModVal:function(t,e,n){var i,o=(e||this.domElem)[0];return o&&(i=o.className.match(this.__self._buildModValRE(t,n||e))),i?i[2]:""},_extractMods:function(t,e){var n={},i=!t.length,o=0;return((e||this.domElem)[0].className.match(this.__self._buildModValRE("("+(i?y:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=(t=t.trim()).lastIndexOf(M),i=t.substr(0,e-1).lastIndexOf(M);n[t.substr(i+1,e-i-1)]=t.substr(e+1),++o}),o<t.length&&t.forEach(function(t){t in n||(n[t]="")}),n},_afterSetMod:function(t,n,i,o,s){var r=this.__self,a=r._buildModClassPrefix(t,s),c=r._buildModValRE(t,s),u=""===n;(o||this.domElem).each(function(){var t=this.className;t.indexOf(a)>-1?this.className=t.replace(c,u?"":"$1"+a+n):u||e(this).addClass(a+n)}),s&&this.dropElemCache(s,t,i).dropElemCache(s,t,n)},findElem:function(t,e,n,i){arguments.length%2?(i=n,n=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t));var o=this.__self,s="."+e.split(" ").map(function(t){return w(o._name,t,n,i)}).join(",.");return r(t,s)},_elem:function(t,e,n){var i,o=t+k(e,n);return(i=this._elemCache[o])||(i=this._elemCache[o]=this.findElem(t,e,n),i.__bemElemName=t),i},elem:function(t,n,i){if(n&&"string"!=typeof n)return n.__bemElemName=t,n;if(t.indexOf(" ")<0)return this._elem(t,n,i);var o=e([]),s=this;return t.split(" ").forEach(function(t){o=o.add(s._elem(t,n,i))}),o},dropElemCache:function(t,e,n){if(t){var i=this,o=k(e,n);t.indexOf(" ")<0?delete i._elemCache[t+o]:t.split(" ").forEach(function(t){delete i._elemCache[t+o]})}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),c(t[0])[w(this.__self.getName(),e)]||{}},elemify:function(t,n){return(t=e(t)).__bemElemName=n,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,n){return this.__self.buildSelector(t,e,n)},destruct:function(t){var n=this,i=n.__self;n._isDestructing||(n._isDestructing=!0,n._needSpecialUnbind&&i.doc.add(i.win).unbind("."+n._uniqId),n.dropElemCache().domElem.each(function(t,n){var i=a(n);e.each(i,function(t,e){var i=p[e.uniqId];i?i._isDestructing||l(i,n):delete f[e.uniqId]}),u(n)}),t||n.domElem.remove(),delete p[n.un()._uniqId],delete n.domElem,delete n._elemCache,n.__base())}},{scope:null,doc:d,win:h,_processLive:function(t){var e=this,n=e._liveInitable;if("live"in e){var i="undefined"==typeof n;if(i^t){n=e.live()!==!1;var o=e.getName(),s=e.live;e.live=function(){return this.getName()===o?n:s.apply(this,arguments)}}}return n},init:function(t,n,o){(!t||e.isFunction(t))&&(o=n,n=t,t=d);var s=e.identify();return r(t,".i-bem").each(function(){i(e(this),s)}),n&&this.afterCurrentEvent(function(){n.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,i,o){"boolean"!=typeof t&&(o=i,i=t,t=n),x.call(r(i,".i-bem",o)).each(function(t,n){var i=a(this);e.each(i,function(t,e){if(e.uniqId){var i=p[e.uniqId];i?l(i,n):delete f[e.uniqId]}}),u(this)}),t||(o?i.empty():i.remove())},update:function(t,e,n,i){this.destruct(t,!0),this.init(t.html(e),n,i)},replace:function(t,n){this.destruct(!0,t),this.init(e(n).replaceAll(t))},append:function(t,n){this.init(e(n).appendTo(t))},prepend:function(t,n){this.init(e(n).prependTo(t))},before:function(t,n){this.init(e(n).insertBefore(t))},after:function(t,n){this.init(e(n).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,n,i,o){var s=this;if(n.indexOf(" ")>-1)n.split(" ").forEach(function(e){s._liveClassBind(t,e,i,o)});else{var r=g[n],a=e.identify(i);r||(r=g[n]={},d.bind(n,s.changeThis(s._liveClassTrigger,s))),r=r[t]||(r[t]={uniqIds:{},fns:[]}),a in r.uniqIds||(r.fns.push({uniqId:a,fn:s._buildLiveEventFn(i,o)}),r.uniqIds[a]=r.fns.length-1)}return this},_liveClassUnbind:function(t,n,i){var o=g[n];if(o)if(i){if(o=o[t]){var s=e.identify(i);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);a>r;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var n=g[t.type];if(n){var i=t.target,o=[];for(var s in n)n.hasOwnProperty(s)&&o.push(s);do for(var r=" "+i.className+" ",a=0;s=o[a++];)if(r.indexOf(" "+s+" ")>-1){for(var c,u=0,l=n[s].fns,h=!1;c=l[u++];)c.fn.call(e(i),t)===!1&&(h=!0);if(h&&t.preventDefault(),h||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(i=i.parentNode))}},_buildLiveEventFn:function(t,n){var i=this;return function(s){var r=[i._name,((s.data||(s.data={})).domElem=e(this)).closest(i.buildSelector()),!0],a=o.apply(null,n?r.concat([t,s]):r);return a&&!n&&t?t.apply(a,arguments):void 0}},liveInitOnEvent:function(t,e,n){return this.liveBindTo(t,e,n,!0)},liveBindTo:function(t,i,o,s){(!i||e.isFunction(i))&&(o=i,i=t,t=n),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(w(r._name,e,t.modName,t.modVal),i,o,s)}),r):r._liveClassBind(w(r._name,t.elem,t.modName,t.modVal),i,o,s)},liveUnbindFrom:function(t,i,o){(!i||e.isFunction(i))&&(o=i,i=t,t=n);var s=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){s._liveClassUnbind(w(s._name,t),i,o)}),s):s._liveClassUnbind(w(s._name,t),i,o)},_liveInitOnBlockEvent:function(t,e,n,i){var o=this._name;return v[e].on(t,function(t){if(t.block.domElem){var e=arguments,s=t.block[i](o);n&&s.forEach(function(t){n.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOutside")},liveInitOnBlockInit:function(t,e){return this.liveInitOnBlockEvent("init",t,e)},liveInitOnBlockInsideInit:function(t,e){return this.liveInitOnBlockInsideEvent("init",t,e)},on:function(t,e,n,i,o){return t.jquery?this._liveCtxBind(t,e,n,i,o):this.__base(t,e,n,i)},un:function(t,e,n,i){return t.jquery?this._liveCtxUnbind(t,e,n,i):this.__base(t,e,n)},liveCtxBind:function(t,e,n,i,o){return this._liveCtxBind(t,e,n,i,o)},_liveCtxBind:function(t,i,o,s,r){var a=this;if("string"==typeof i)if(e.isFunction(o)&&(r=s,s=o,o=n),i.indexOf(" ")>-1)i.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var c=a._buildCtxEventName(i),u=_[c]||(_[c]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),n=u.ctxs[t];n||(n=u.ctxs[t]={},++u.counter),n[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}
})}else e.each(i,function(e,n){a._liveCtxBind(t,e,n,o)});return a},liveCtxUnbind:function(t,e,n,i){return this._liveCtxUnbind(t,e,n,i)},_liveCtxUnbind:function(t,n,i,o){var s=this,r=_[n=s._buildCtxEventName(n)];return r&&(t.each(function(){var t,n=e.identify(this,!0);n&&(t=r.ctxs[n])&&(i&&delete t[e.identify(i)+(o?e.identify(o):"")],(!i||e.isEmptyObject(t))&&(r.counter--,delete r.ctxs[n]))}),r.counter||delete _[n]),s},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t[0].className.match(this._buildElemNameRE());return e?e[1]:n},extractParams:c,_buildModClassPrefix:function(t,e){return w(this._name)+(e?E+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+M+t+M},_buildModValRE:function(t,e,n){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"("+y+")(?=\\s|$)",n)},_buildElemNameRE:function(){return new RegExp(this._name+E+"("+y+")(?:\\s|$)")},buildSelector:function(t,e,n){return"."+w(this._name,t,e,n)},getBlockByUniqId:function(t){return p[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),function(){String.prototype.trim||(String.prototype.trim=function(){for(var t=this.replace(/^\s\s*/,""),e=/\s/,n=t.length;e.test(t.charAt(--n)););return t.slice(0,n+1)})}(),$(function(){BEM.afterCurrentEvent(function(){BEM.DOM.init()})}),function(){var t={9:"tab",13:"enter",32:"space",33:"page up",34:"page down",35:"end",36:"home",37:"left arrow",38:"up arrow",39:"right arrow",40:"down arrow",46:"delete"},e={27:"escape"};BEM.DOM.decl({block:"i-ua",modName:"interaction",modVal:"yes"},{onSetMod:{js:{inited:function(){this.bindTo("mousedown",this._onPointer).bindTo("keydown",this._onKeyboard)}}},_onPointer:function(){this.interaction="pointer",this.domElem.attr("data-interaction","pointer"),this.unbindFrom("mousedown")},_onKeyboard:function(n){var i=n.keyCode;return e[i]?void this._onPointer():void(t[i]&&"keyboard"!==this.interaction&&(this.domElem.attr("data-interaction","keyboard"),this.interaction="keyboard",this.bindTo("mousedown",this._onPointer)))}})}(),function(t){t=t||{},t.oframebustMatchDomain=function(t,e){t="[object Array]"===Object.prototype.toString.call(t)?t:function(){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}();for(var n=0,i=t.length;i>n;n++){var o=t[n];if("string"==typeof o){if(/(\?|\*)/.test(o)){var s=o.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\?/g,".{1}");if(new RegExp("^"+s+"$").test(e))return!0}else if(e==o)return!0}else try{if(o.test(e))return!0}catch(r){}}}}(window.Lego),function(t){t=t||{},t.oframebust=function(e){if(window.top.location!=window.location){var n=document.referrer.match(/^https?:\/\/([^:\/\s]+)\/?.*/);if(!n)return;!t.oframebustMatchDomain(e,n[1])&&(window.top.location=window.location)}}}(window.Lego),BEM.DOM.decl("stat-scripts",{onSetMod:{js:function(){var t=this,e=_.values(this.params),n={ga:this.startGoogleAnalytics,gtm:this.startGoogleTagManager,visualdna:this.startVisualDNA,yametrics:this.startYandexMetrics};_.forEach(e,function(e){_.has(n,e)&&n[e].call(t)})}}},{}),BEM.DOM.decl("stat-scripts",{startGoogleAnalytics:function(){var t=window._gaq||[],e=this.findBlockOutside("i-global").params;t.push(["_setAccount","UA-19216811-1"]),t.push(["_setDomainName",".yandex.ru"]),t.push(["_addOrganic","Mail","q"]),t.push(["_addOrganic","Nigma","q"]),t.push(["_addOrganic","Webalta","q"]),t.push(["_addOrganic","Aport","r"]),t.push(["_addOrganic","Gogo","q"]),t.push(["_addOrganic","QIP","query"]),t.push(["_setCustomVar",4,"Lang",e.lang,3]),t.push(["_setAllowLinker",!0]),e.offer&&e.auth?(t.push(["_setCustomVar",1,"Auth","Yes",3]),t.push(["_setCustomVar",2,"Account","Yes",1]),t.push(["_setCustomVar",3,"Login","Yes",1])):e.auth?(t.push(["_setCustomVar",1,"Auth","Yes",3]),t.push(["_setCustomVar",3,"Login","Yes",1])):t.push(["_setCustomVar",1,"Auth","No",3]),t.push(["_trackPageview"]),window._gaq=t,function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",e.offer||!e.auth||e.dev||(t.onload=function(){var t=window._gat._getTracker("MO-19216811-2");t._trackPageview()});var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()}},{}),BEM.DOM.decl("stat-scripts",{startGoogleTagManager:function(){!function(t,e,n,i,o){t[i]=t[i]||[],t[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var s=e.getElementsByTagName(n)[0],r=e.createElement(n),a="dataLayer"!==i?"&l="+i:"";r.async=!0,r.src="//www.googletagmanager.com/gtm.js?id="+o+a,s.parentNode.insertBefore(r,s)}(window,document,"script","dataLayer","GTM-TWSZGW")}},{}),BEM.DOM.decl("stat-scripts",{startVisualDNA:function(){!function(){var t,e;t=document.createElement("script"),t.type="text/javascript",t.src="//a1.vdna-assets.com/analytics.js",t.async=!0,e=document.getElementsByTagName("body")[0],e.insertBefore(t,e.lastChild),this.VDNA=this.VDNA||{},this.VDNA.queue=this.VDNA.queue||[]}(),VDNA.queue.push({apiKey:"yandexmoney1393582641971",method:"reportPageView"})}},{}),BEM.DOM.decl("stat-scripts",{yaMetricsCounterId:152220,startYandexMetrics:function(){var t=this,e="yandex_metrika_callbacks",n=document.getElementsByTagName("script")[0],i=document.createElement("script"),o=function(){n.parentNode.insertBefore(i,n)};window[e]=window[e]||[],window[e].push(function(){try{window["yaCounter"+t.yaMetricsCounterId]=new Ya.Metrika({id:t.yaMetricsCounterId,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0}),window.jQuery("body").trigger("ya-counter-"+t.yaMetricsCounterId+"-inited")}catch(e){}}),i.type="text/javascript",i.async=!0,i.src=("https:"===document.location.protocol?"https:":"http:")+"//mc.yandex.ru/metrika/watch.js","[object Opera]"===window.opera?document.addEventListener("DOMContentLoaded",o,!1):o()},registrationYandexMetricsGoal:function(){var t=this.findBlockOutside("i-global").params;this.customYandexMetricsGoal("REGISTRATION",{}),"SMS"===t.sauthType&&this.customYandexMetricsGoal("REGISTRATION_SMS",{})},customYandexMetricsGoal:function(t,e){var n=this;try{t&&(_.isObject(e)||(e={}),window["yaCounter"+n.yaMetricsCounterId]?window["yaCounter"+n.yaMetricsCounterId].reachGoal(t,e):window.jQuery("body").on("ya-counter-"+n.yaMetricsCounterId+"-inited",function(){window["yaCounter"+n.yaMetricsCounterId].reachGoal(t,e)}))}catch(i){}}},{}),BEM.DOM.decl("header2",{onSetMod:{js:{inited:function(){this._openedPanel=null}}},_setOpenedPanel:function(t){var e=this._openedPanel;e!==t&&(this._openedPanel=t,this.trigger("panel-switch",{closing:e,opening:t}))},getOpenedPanel:function(){return this._openedPanel},openPanel:function(t){return this._setOpenedPanel(t),this},closePanel:function(t){return t&&t!==this._openedPanel||this._setOpenedPanel(null),this},togglePanel:function(t,e){return t!==this._openedPanel||e?(t!==this._openedPanel&&e||arguments.length<2)&&this._setOpenedPanel(t):this._setOpenedPanel(null),this}}),BEM.DOM.decl("link",{getDefaultParams:function(){return{origTabindex:"0"}},onSetMod:{disabled:function(t,e){var n="yes"===e;this.domElem.attr({"aria-disabled":n,tabindex:n?-1:this.params.origTabindex})}}}),function(t){var e=t.event.special.leftclick={setup:function(){t(this).bind("click",e.handler)},teardown:function(){t(this).unbind("click",e.handler)},handler:function(e){e.button||(e.type="leftclick",t.event.handle.apply(this,arguments),e.type="click")}}}(jQuery),function(t){var e=t.event.special.tap={setup:function(){t(this).bind("touchstart",e.handler)},teardown:function(){t(this).unbind("touchstart",e.handler)},handler:function(e){e.button||(e.type="tap",t.event.handle.apply(this,arguments),e.type="touchstart")}}}(jQuery),BEM.DOM.decl("button",{onSetMod:{js:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")},disabled:function(t,e){var n="yes"===e,i=this.domElem;this._href&&(n?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent(function(){i.attr("disabled",n)})},pressed:function(t,e){return this.isDisabled()?!1:void this.trigger("yes"===e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.liveBindTo("leftclick tap",function(t){this._onClick(t)})}}),BEM.DOM.decl("button",{onSetMod:{js:function(){this.__base.apply(this,arguments)},focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this.unbindFromWin("unload").unbindFrom("keydown"),this._isControlFocused()&&this._getControl().blur(),this.afterCurrentEvent(function(){this.trigger("blur")})}},disabled:function(t,e){this.__base.apply(this,arguments),"yes"===e&&this.domElem.keyup()},hovered:function(t,e){return this.isDisabled()?!1:void(""===e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},_onKeyDown:function(t){var e=t.keyCode;13!==e&&32!==e||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32===e&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){this.__base.apply(this,arguments);var t={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}},e=$.browser.msie&&"8.0"===$.browser.version;this.liveBindTo("mouseover mouseout mouseup focusin focusout",function(n){var i=t[n.type];this.setMod(i.name,i.val||""),!e||this._href||"mouseup"!==n.type&&"mouseout"!==n.type||this.domElem.height()}).liveBindTo("mousedown",function(e){var n=t[e.type];1===e.which&&this.setMod(n.name,n.val||"")})}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl("dropdown",{onSetMod:{js:function(){var t=this,e=t.params,n=t._popup=t.findBlockOn(t.elem(e.popupElem),"popup").on("show",function(){t.setMod("action","open").trigger("show")}).on("hide",function(){t.setMod("action","closed").trigger("hide")});e.popupMethods.map(function(e){t[e]=n[e].bind(n)});var i=t.params.switcherBlock,o=t.elem("switcher");i&&(t._switcher=t.findBlockOn(o,i).domElem),o.attr({"aria-haspopup":!0,"aria-expanded":!1})},action:function(t,e){this.elem("switcher").attr("aria-expanded","open"===e)}},getPopup:function(){return this._popup},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}},destruct:function(){this._popup&&this._popup.domElem&&this._popup.destruct.apply(this._popup,arguments),this.__base.apply(this,arguments)},_toggle:function(){this._popup.toggle(this._switcher)},_onSwitcherClick:function(){this._switcher||(this._switcher=this.elem("switcher")),this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase();"button"!==e&&("a"!==e&&13===t.which||32===t.which)&&(t.preventDefault(),this.params.switcherBlock||this._toggle())}}},{live:function(){this.liveBindTo("switcher","leftclick tap",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this._val=this.elem("control").val()},disabled:function(t,e){this.elem("control").attr("disabled","yes"===e)},focused:function(t,e){if(this.hasMod("disabled","yes"))return!1;var n="yes"===e;n?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(n?"focus":"blur")})}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){if("undefined"==typeof t)return this._val;t=null===t?"":t.toString();var n=this.elem("control");return n.val()!==t&&n.val(t),this._val=t,this.trigger("change",e),this},name:function(){return this.elem("control").attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var n=document.selection.createRange();if(n&&n.parentElement()===t){var i=t.value.length,o=t.createTextRange();o.moveToBookmark(n.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?i:-o.moveEnd("character",-i)}}return e},_onFocus:function(){return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return this.hasMod("disabled","yes")?!1:void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)})}}),function(){var t,e=[],n=function(){e.forEach(function(t){t.val(t.elem("control").val())})},i=function(t){try{return t.activeElement}catch(e){}};BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._instanceIndex=e.push(this)-1;var o=this.elem("control"),s=i(this.__self.doc[0]),r=this.params.autoFocus&&(!s||!$(s).is("input, textarea"));(s===o[0]||r)&&(this.setMod("focused","yes")._focused=!0),t||(t=this.channel("sys").on({tick:n,idle:function(){t.un("tick",n)},wakeup:function(){t.on("tick",n)}})),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&38===t.which&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},val:function(t,e){var n="undefined"!=typeof t,i=this.elem("control");return t=n?null===t?"":t.toString():i.val(),this._val!==t&&(this._val=t,i.val()!==t&&i.val(t),this.trigger("change",e)),n?this:t},_focus:function(){var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}else t.focus()},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),e.splice(this._instanceIndex,1),e.slice(this._instanceIndex).forEach(function(t){t._instanceIndex--})}},{})}(),BEM.DOM.decl("input",{onSetMod:{focused:function(){this.__base.apply(this,arguments);var t=this.elem("box").css("z-index");this.elem("box").css("z-index",-1).css("z-index",t)}}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._tooltips={error:null,hint:null},this._onToggleFocus()}},_onToggleFocus:function(){this.params.hintMessage&&this.on("focus",function(){this.showHintTip({content:this.params.hintMessage})}).on("blur",function(){this.hideHintTip()})},showErrorTip:function(t){var e=this._tooltips.hint,n=e?e.hasMod("shown"):!1;n&&e.delMod("shown"),this._showTip({type:"error",theme:"red",content:t})},hideErrorTip:function(){this._hideTip({type:"error"})},showHintTip:function(t){this._showTip({type:"hint",theme:t.theme,content:t.content})},hideHintTip:function(){this._hideTip({type:"hint"})},_showTip:function(t){var e=t.type,n=t.content||"";if(!this._tooltips[e]){var i="error"===e?"error":"normal",o="error"===e?"no":"yes",s=this.hasMod("customTip")?this.getMod("customTip"):"",r=this.params.tipOffset||(this.hasMod("outer-icon")?39:3),a=this.params.tipAxis||"middle",c=this.params.watchScroll?"yes":"no",u=this.params.tooltipSize?this.params.tooltipSize:this.getMod("size"),l=BEMHTML.apply({block:"tooltip",mods:{theme:i,size:u,autoclosable:o,"watch-scroll":c,custom:s},js:{offset:r,directions:this.params.tipDirections||["right"],axis:a},content:[{elem:"tail"},n]}),h=$(l).insertBefore(this.domElem);BEM.DOM.init(h),this._tooltips[e]=h.bem("tooltip")}n&&this._tooltips[e]._getPopup().setContent(n),this._tooltips[e].setOwner(this.elem("box")).setMod("shown","yes")},_hideTip:function(t){this._tooltips[t.type]&&this._tooltips[t.type].delMod("shown")},filterChars:function(t,e){if(!t.metaKey&&!t.ctrlKey){var n=t.which,i=String.fromCharCode(n),o=$.browser.opera?"8 9 13 16 17 18 20 35 36 37 38 39 40 46 ".indexOf(n+" ")>-1:0===n,s=_.indexOf([8,13],n)>-1,r=e.indexOf(i)>-1;o||s||r||t.preventDefault()}}}),function(){var t,e=0,n=!1,i=0,o=BEM.channel("sys"),s=50;BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",function(){i=0,n&&(n=!1,o.trigger("wakeup"))}),this._tick()},_tick:function(){var r=this;o.trigger("tick",{counter:e++}),!n&&(i+=s)>3e3&&(n=!0,o.trigger("idle")),t=setTimeout(function(){r._tick()},s)}}).start()}(),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}},_onBoxClear:function(){this.hasMod("clear","visibility","visible")||this.setMod("focused","yes")},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible","",!!this._val)}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("clear","mousedown",function(t){1===t.which&&this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","leftclick tap",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("box","leftclick tap",function(){this._onBoxClear()})}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()},focused:function(){return this.__base.apply(this,arguments)===!1?!1:void(this._hasHint&&this._updateHint())}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),function(){BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),(this._hasHint=!!this.elem("hint")[0])&&this.bindTo("control","paste",function(){this._hideHint()},this)}}},_hideHint:function(){return this.delMod(this.elem("hint"),"visibility")}})}(),BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.setMod("checked",this.elem("control").prop("checked")?"yes":""),this._isControlFocused()&&this.setMod("focused","yes")},focused:{yes:function(){return this.isDisabled()?!1:(this._isControlFocused()||this.elem("control").focus(),this.setMod(this.elem("box"),"focused","yes"),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this._isControlFocused()&&this.elem("control").blur(),this.delMod(this.elem("box"),"focused"),this.afterCurrentEvent(function(){this.trigger("blur")})}},checked:function(t,e){return this.isDisabled()?!1:(this.elem("control").prop("checked","yes"===e),this.afterCurrentEvent(function(){this.trigger("change",{checked:"yes"===e})}),void this.setMod(this.elem("box"),"checked",e))},disabled:function(t,e){this.elem("control").prop("disabled","yes"===e)}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes","")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},_onClick:function(){this.isDisabled()||this.setMod("focused","yes")},_onChange:function(t){t.target.checked?this.setMod("checked","yes"):this.delMod("checked")},_onFocusInFocusOut:function(t){this.setMod("focused","focusin"===t.type?"yes":"")},_onMouseOverMouseOut:function(t){this.isDisabled()||this.setMod("hovered","mouseover"===t.type?"yes":"")},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}}},{live:function(){return this.liveBindTo("leftclick tap",function(t){this._onClick(t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("control","focusin focusout",function(t){this._onFocusInFocusOut(t)}).liveBindTo("mouseover mouseout",function(t){this._onMouseOverMouseOut(t)}),!1}}),BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._onLinkClick()}},_onLinkClick:function(){this.domElem.on("click",".link, .button",function(t){t.stopPropagation()})}}),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="…";return function(e,n,i){return e.length>n+i?e.substring(0,n-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},highlight:function(t,e){if(!$.isArray(e))return t;var n,i=[],o=0,s=e.sort(function(t,e){return t[0]-e[0]}),r=[],a="?",c=~t.indexOf(a),u=function(){for(var e,n=/\&#\d+;/gi;e=n.exec(t);)r.push(e[0]),t=t.replace(e[0],a)},l=function(t){if(c)return t;for(;~t.indexOf(a)&&r.length;)t=t.replace(a,r[0]),r.shift();return t};return!c&&u(),s.forEach(function(e){n=o>e[0]?o:e[0],i.push({tag:"span",elem:"span",content:l(t.slice(o,n))}),i.push({tag:"em",elem:"em",content:l(t.slice(n,o=e[1]))})},this),i.push({tag:"span",elem:"span",content:l(t.slice(o))}),i}}),function(){BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,n,i){if("disabled"==i)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","leftclick",function(t){this.onItemSelectorClick(t)})}})}(),function(){var t={};BEM.decl("i-request",{onSetMod:{js:function(){this._preventCache=!1}},get:function(t,e,n,i){$.isFunction(n)||(i=n,n=this.params.onError),this._get(t,e,n,$.extend({},this.params,i))},_get:function(e,n,i,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){n.call(this.params.callbackCtx,r.data[s])},this):this._do(e,n,i,o)},_do:function(){},_onSuccess:function(t,e,n,i){i.cache&&!this._preventCache&&this.putToCache(i,t,n),this._preventCache=!1},_buildCacheKey:function(t){return"string"==typeof t?t:$.param(t)},putToCache:function(e,n,i){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(n,e);o.data[s]=i,o.keys.push(s)},dropCache:function(){delete t[this.params.cacheGroup]},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}},_get:function(t,e,n,i){this._number++,this._requestNumber++,this._retryCount=i.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,n,i){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:i.data?$.extend({},i.data,t):t},a=o._wrapCallback(function(n,s,r){o._onSuccess(o._buildCacheKey(t,i),t,n[0],i),o._allowCallback(s,r)&&e.apply(i.callbackCtx,n)}),c=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-->0?setTimeout(function(){o._do.apply(o,s)},i.retryInterval):n&&n.apply(i.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback"].concat(i.paramsToSettings||[]),function(t,e){r[e]=i[e]}),$.ajax(r).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,n=this._number;return function(i){null!==i&&t(arguments,e,n)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber==t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},preventCallbacks:function(){this.abort()},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}}),BEM.DOM.decl({name:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")})},_onKeyUp:function(t){t.shiftKey||t.ctrlKey||t.altKey||(13===t.which||32===t.which)&&(this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")}))}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({modName:"pseudo",modVal:"yes"},"leftclick tap",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this._onKeyUp(t)})}}),BEM.DOM.decl("show-more",{onSetMod:{js:function(){this._onClickLink()}},_onClickLink:function(){var t=this,e=t.elem("link","type","show"),n=t.elem("link","type","hide"),i=function(){t._toggleContent(),t.toggleMod(e,"hidden","yes"),t.toggleMod(n,"hidden","yes")};e.on("click",i),t._triggerClickOnKey(e),n.on("click",i),t._triggerClickOnKey(n)},_triggerClickOnKey:function(t){t.on("keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||(13===t.which||32===t.which)&&$(t.target).trigger("click")})},_toggleContent:function(){var t=this.elem("content"),e=this.hasMod("animated","yes");e?t.slideToggle():t.toggle(),this.toggleMod(t,"hidden","yes")}}),BEM.DOM.decl("form",{onSetMod:{js:function(){this.bindTo("submit",this._onSubmit),this._bPage=this.findBlockOutside("b-page"),this.bPageLayout=this.findBlockOutside("page-layout"),this._bProgress=this.findBlockInside("progress-indicator"),this._lantern=null}},_onSubmit:function(t){var e=this,n=this.findBlocksInside({block:"input",modName:"validation",modVal:"failed"}),i=!0,o=!0,s=this.hasMod("ajax","yes"),r=this.hasMod("validation","yes"),a={originalEvent:t,customValidationFailed:!1};if(this.trigger("beforeSubmit",a),t.isDefaultPrevented())return!1;if(a.customValidationFailed&&(o=!1),r&&(this.hideErrors(this.domElem),o=this.validate()&&o),n.length&&(i=!1,_.forEach(n,function(t){t.showErrorTip()})),this.findBlockInside("scroll")&&this.findBlockInside("scroll")._onScroll(),o&&i&&r&&(this.trigger("afterValidation",{originalEvent:t}),t.isDefaultPrevented()))return!1;if(s&&o&&i){var c={mainContent:e.domElem[0].outerHTML};if(this.bPageLayout.hasMod("type","three-column")){var u=this.bPageLayout.elem("right-column");c.rightColumn=u[0].innerHTML}history.pushState(c,null),this.sendAjaxRequest()}return o&&i&&!s},refreshPage:function(){this._bPage.trigger("change")},hideErrors:function(t){var e=t.find(".input");e.each(function(t,e){$(e).bem("input").hideErrorTip()})},updateContent:function(t){var e,n=this.bPageLayout;if(t&&(e=n.elem(n.hasMod("type","center")?"content":"main-content"),e[0].innerHTML=t.mainContent,n.hasMod("type","three-column"))){var i=n.elem("right-column");i[0].innerHTML=t.rightColumn}},drawLantern:function(t){var e=this._getLanternSectionBemjson(t),n=$(BEMHTML.apply(e));this._lantern?(this._lantern.replaceWith(n),this._lantern=n):(this._lantern=n.prependTo(this.domElem),this.refreshPage())},_getLanternSectionBemjson:function(t){return{block:"lantern",mods:{type:"alert",iframe:"yes"},content:[{elem:"content",content:t.content}]}},toggleDisableButton:function(t){t=t||!1,this.findBlockInside("button").toggleMod("disabled","yes",t)},toggleFormSection:function(t,e,n){n=n!==!1;var i=n?this.elem("control","name",t):this.findElem("control","name",t);e&&this.delMod(i,"hidden","yes"),i.find(".input:visible").each(function(){$(this).bem("input").toggleMod("disabled","yes",!e).hideErrorTip()}),i.find(".select:visible").each(function(){$(this).bem("select").toggleMod("disabled","yes",!e)}),i.find(".checkbox:visible").each(function(){$(this).bem("checkbox").toggleMod("disabled","yes",!e)}),e||this.setMod(i,"hidden","yes")},toggleFormControl:function(t,e,n){n=n||"input";var i=this.elem("control","name",t).bem(n),o=i.domElem.closest(".form__item");this.toggleMod(o,"hidden","yes",!e),i.toggleMod("disabled","yes",!e),"input"===n&&i.hideErrorTip()},disable:function(){var t=this.getControlsList();_.each(t,function(t){var e=t.__self.getName();if("radiobox"===e||"radio-button"===e){var n=t.elem("radio");_.each(n,function(e){t.setMod($(e),"disabled","yes")})}else t.setMod("disabled","yes")})},getControlsList:function(t){var e=this,n=["input","select","checkbox","textarea","button","radiobox","radio-button"],t=t||n,i=[];return _.each(t,function(t){i=i.concat(e.findBlocksInside(t))}),i}}),BEM.DOM.decl({name:"input",modName:"validation",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("focus",function(){this.hideErrorTip()}),this.on("blur",function(){var t=$.trim(this.val());this.val(t)})}}}),BEM.DOM.decl({block:"popup",modName:"autosize",modVal:"yes"},{getDefaultParams:function(){var t=this.__base();return t.offsetWithoutTail=5,t},repaint:function(){return this._saveDefault(),this.__base(),this.domElem.css({maxWidth:this.size.width,height:this.size.height}),this},_saveDefault:function(){this._defSize||(this._defSize=this.getPopupSize())},_resetDefault:function(){return this._defSize=null,this.domElem.css({maxWidth:"",height:""}),this},_getAvailableSpace:function(t){return this._owner?{width:this._getAvailableWidth(t),height:this._getAvailableHeight(t)}:$.extend({},this._defSize)},_getAvailableWidth:function(t){var e=BEM.DOM.getWindowSize(),n=e.width,i=t.offset,o=this._owner[0].getBoundingClientRect(),s=$.extend({},this._defSize);switch(t.to){case"left":n=o.left,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.left&&(n+=i.left),i.right&&(n-=i.right));break;case"right":n=e.width-o.right,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.left&&(n-=i.left),i.right&&(n+=i.right))}return("left"===t.to||"right"===t.to)&&(n-=this._tailPos?2*this.params.tail.width:this.params.offsetWithoutTail),Math.min(s.width,n)},_getAvailableHeight:function(t){var e=BEM.DOM.getWindowSize(),n=e.height,i=t.offset,o=this._owner[0].getBoundingClientRect(),s=$.extend({},this._defSize);switch(t.to){case"bottom":n=e.height-o.bottom,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.bottom&&(n+=i.bottom),i.top&&(n-=i.top));break;case"top":n=o.top,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.bottom&&(n-=i.bottom),i.top&&(n+=i.top))}return("bottom"===t.to||"top"===t.to)&&(n-=this._tailPos?2*this.params.tail.height:this.params.offsetWithoutTail),Math.min(s.height,n)},_calcTop:function(t){var e,n=this.__base(t),i=$(window).scrollTop(),o=BEM.DOM.getWindowSize(),s=this.getPlacingSize(),r=this.getOwnerPos(),a=this.getOwnerSize();return 0>n&&(n=0),e=Math.max(o.height+i,r.top+a.height),n+s.height>e&&(n=e-s.height),n},_calcLeft:function(t){var e,n=this.__base(t),i=$(window).scrollLeft(),o=BEM.DOM.getWindowSize(),s=this.getPlacingSize(),r=this.getOwnerPos(),a=this.getOwnerSize();return 0>n&&(n=0),e=Math.max(o.width+i,r.left+a.width),n+s.width>e&&(n=e-s.width),n},getPlacingSize:function(){return this._availSizes},_calcPlacingSize:function(t){return this._availSizes=this._getAvailableSpace(t),this._availSizes},_calcVisibilityFactor:function(){var t=this._defSize,e=this.getPlacingSize(),n=e.height*e.width,i=t.height*t.width;return n/i*100}}),function(t,e){function n(t){var e={};return"option"===t.item?(e={block:r,elem:"option",tag:"option",attrs:{value:t.value},content:t.content},t.disabled&&(e.attrs.disabled="disabled"),t.selected&&(e.attrs.selected="selected")):"optgroup"===t.item&&(e={elem:"option-group",tag:"optgroup",attrs:{label:t.label}},t.disabled&&(e.attrs.disabled="disabled"),e.content=Array.isArray(t.content)?t.content.map(function(t,e){return n(t,e)
}):t.content),e.block=r,e}var i=t.browser.opera&&t.browser.version<12.1?"keypress":"keydown",o=t.browser.msie&&parseInt(t.browser.version,10)<=10,s=null,r="select";e.DOM.decl("select",{onSetMod:{js:function(){this._items=[],this._curItemIndex=-1,this._rowHeight=22,this.on("change",this._redrawParentPopup),this._getSelectedText()!==this._buttonText()&&this.elem("control").trigger("change")},disabled:function(t,e){var n="yes"===e;this.elem("control").attr("disabled",n),this._getButton().setMod(t,e),n&&this.delMod("opened").delMod("focused")},focused:{yes:function(){return this.hasMod("disabled","yes")?!1:(this._useNativeControl()||this.bindTo(i,this._onKeyDown),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom(i),this.afterCurrentEvent(function(){this.trigger("blur")})}}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(e,n){if("undefined"==typeof e)return this.elem("control").val();var i,o=-1;return this.findElem("option").each(function(n){this.value===e&&!this.disabled&&(i=t(this).parent("optgroup")[0],!(i&&i.disabled))&&(o=n)}),o>-1&&this._selectedIndex(o,n),this},_selectedIndex:function(e,n){var i=this._getSelectedIndex();return"undefined"==typeof e||e===i?i:(this.elem("control").prop("selectedIndex",e),this._useNativeControl()||(this._buttonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(e),"selected","yes")),this.trigger("change",t.extend({index:e,prev:i},n)),e)},setOptions:function(i){return i?(e.DOM.update(this.elem("control"),BEMHTML.apply(t.map(i,n))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==s?s:s="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){return this._isParentPopup()&&this._popup._parent.repaint(),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){var t=this;t._buttonText(t._getSelectedText()),this.trigger("change",{index:t._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=38===t.keyCode,n=40===t.keyCode,i=13===t.keyCode,o=32===t.keyCode;if(e||n){if(t.preventDefault(),!this.isOpened())return this.open();var s=this._items.length,r=this._curItemIndex;if(e&&0===r||n&&r>s-2)return;if(s){var a=n?1:-1,c=0;for(c=r;c>=0&&s>=c;)if(c+=a,this._isSelectableItem(this._items.eq(c))){r=c;break}this._onEnterItem(this._items.eq(r),!0)}}(i||o)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,n){this.elem("button").attr("aria-activedescendant",t.attr("id"));var i=this._curItemIndex,o=this._getItemIndex(t),s=this._items;i>-1&&this.delMod(s.eq(i),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(s.eq(o),"hovered","yes")),n&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_onButtonBlur:function(){return this.isOpened()&&this._isPopupFocused()?void this._focusButton():void this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem(t(document.activeElement))}catch(e){return!1}},_buttonText:function(t){return"undefined"==typeof t?this._getButton().elem("text").text():(this._getButton().elem("text").html(t||" &nbsp; "),void(o&&this.domElem.parent().css("outline","")))},_isOutsideClicked:function(e,n){return this.containsDomElem(t(n.target))},_getItemIndex:function(e){return t.inArray(e.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){var e;return e=this.hasMod(t,"disabled","yes")||this.hasMod(t,"label","yes")?!1:!0},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem(t(this.__self.doc[0].activeElement))}catch(e){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened");var t=this._popup;t&&t.domElem&&t.destruct(),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){return this.liveBindTo("control","change",function(){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),!1}})}(jQuery,BEM),function(t,e){var n=t.browser.opera&&t.browser.version<15;e.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){n&&this._popup.domElem.css("display","inline").css("display","")}}}})}(jQuery,BEM),BEM.DOM.decl("select",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("focus",function(){this.hideErrorTip()}),this._tooltips={error:null,hint:null}},"disable-default":function(t,e){var n=this,i=n.elem("option","default","yes"),o="yes"===e;i.each(function(t,e){var i=$(e);i.prop("disabled",o?"disabled":!1),n.redraw()})}},showErrorTip:function(t){this._showTip({type:"error",theme:"red",content:t})},hideErrorTip:function(){this._hideTip({type:"error"})},showHintTip:function(t){this._showTip({type:"hint",theme:t.theme,content:t.content})},hideHintTip:function(){this._hideTip({type:"hint"})},_showTip:function(t){var e=t.type,n=t.content;if(!this._tooltips[e]){var i="error"===e?"error":"normal",o="error"===e?"no":"yes",s=this.hasMod("customTip")?this.getMod("customTip"):"",r=this.params.tipOffset||3,a=this.params.tipAxis||"middle",c=this.params.watchScroll?"yes":"no",u=this.params.tooltipSize?this.params.tooltipSize:this.getMod("size"),l=BEMHTML.apply({block:"tooltip",mods:{theme:i,size:u,autoclosable:o,"watch-scroll":c,custom:s},js:{offset:r,directions:this.params.tipDirections||["right"],axis:a},content:[{elem:"tail"},n]}),h=$(l).insertBefore(this.domElem);BEM.DOM.init(h),this._tooltips[e]=h.bem("tooltip")}this._tooltips[e]._getPopup().setContent(n),this._tooltips[e].setOwner(this.elem("button")).setMod("shown","yes")},_hideTip:function(t){this._tooltips[t.type]&&this._tooltips[t.type].delMod("shown")}},{live:function(){return this.liveBindTo("button","change focusin mousedown",function(){this.hideErrorTip()}),this.__base.apply(this,arguments)}}),function(t){function e(t,e,n){var i={block:"select",elem:"item",content:{elem:"text",tag:"span",content:e||" &nbsp; "},elemMods:{}};return n&&(i.elemMods=n),i}function n(t){function n(t,i){var c=t.length;if(c){var u=0;do{var l=$(t[u]),h=l.attr("disabled")&&{disabled:"yes"};if(l.is("optgroup")){a=!0,!l.prev().is("optgroup")&&s.push(o),r.push(s),s=[],s.push(e(l,l.attr("label"),$.extend({label:"yes"},h,i))),n(l.children(),$.extend({inner:"yes"},h,i));var d=s;s=r.pop(),s.push({block:"select",elem:"group",content:d})}else s.push(e(l,l.text(),$.extend(h,l.is(":selected")&&{selected:"yes"},i)))}while(++u<c||a&&(s.push(o),a=!1))}}var i="select",o={block:i,elem:"separator",tag:"i"},s=[],r=[],a=!1;return n(t),BEMHTML.apply(s)}t.DOM.decl("select",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._initButton()}},_initButton:function(){this._getButton().on("focus",this._onButtonFocus,this).on("blur",this._onButtonBlur,this).on("press",this._onButtonPress,this)},_redrawList:function(){var e,i=this,o=this._getPopup().domElem;return t.DOM.update(this.findElem(o,"list"),n(this.elem("control").children())),e=this.findElem(o,"item"),this._curItemIndex=-1,this._items=e.filter(function(){return!i.hasMod($(this),"label","yes")}),this}})}(BEM),BEM.DOM.decl("select",{_redrawList:function(){this.__base();var t=this;this.bindTo(t._items,{mouseup:function(e){1===e.which&&(e.preventDefault(),t._onSelectItem(e.data.domElem))},mouseover:function(e){t._onEnterItem(e.data.domElem)},mouseout:function(e){t._onLeaveItem(e.data.domElem)}})}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled","yes"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,n=t.__self.getName(),i={block:n,elem:"list"},o={block:n,elem:"popup",elemMods:{}},s={animate:"no"},r={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))}),$.extend(o.elemMods,e.elemPopupMods),$.extend(s,e.popupMods),$.extend(r,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:s,mix:[o],js:r,content:{elem:"content",content:i}}));return(t._popup=t.findBlockOn(a,"popup")).on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,n){t._isOutsideClicked(e,n)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,n){t._popup.containsDomElem($(n.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10)||!1;if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var e=parseInt(this._getPopup().domElem.css("height"),10);if(e>t*this._rowHeight)this._getPopup().setSize({height:t*this._rowHeight}),this.setMod(this.findElem(this._getPopup().domElem,"popup"),"scrollable","yes");else{var n=t*this._rowHeight+"px";this._getPopup().domElem.css("height")!==n&&this._getPopup().setSize({height:n})}}else this._getPopup().setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select"),e=this._getPopup();e.show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,n=this._popupContent,i=n.scrollTop(),o=e-i,s=2*this._rowHeight;o>n.height()-s?t=e-s:i&&s>o&&(t=e-n.height()+s),t&&n.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl({block:"select",modName:"layout",modVal:"content"},{_calcPopupDimensions:function(){this.__base.apply(this,arguments),this._popupContent.css("width",this._getButton().domElem.outerWidth()-2*this.__self.FOCUS_OFFSET_HORIZ)}},{FOCUS_OFFSET_HORIZ:1}),function(t,e){t.DOM.decl("radiobox",{onSetMod:{js:function(){var t=this;t._val=t.findElem(t.elem("radio","checked","yes"),"control").val(),t.elem("control").each(function(e,n){var i=[];if(t._isControlFocused($(n))&&i.push("focused"),n.checked&&i.push("checked"),i[0]){var o=t.__self._getRadioByElem($(n));i.forEach(function(e){t.setMod(o,e,"yes")})}})},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(t){this.delMod(this.elem("radio","focused","yes"),"focused");var e=this.findElem(t,"control");this._isControlFocused(e)||e.focus(),this.afterCurrentEvent(function(){this.trigger("focus",{current:t})})},"":function(t){this.afterCurrentEvent(function(){this.trigger("blur",{prev:t})})}},checked:{yes:function(t){this._val=this.findElem(t,"control").prop("checked",!0).val();var e=this.elem("radio","checked","yes");this.delMod(e,"checked"),this.trigger("change",{current:t,prev:e})}},hovered:function(t){return!this.isDisabled(t)},disabled:function(t,e,n){t.find(this.buildSelector("control")).prop("disabled","yes"===n)}}},_isControlFocused:function(t){try{return t[0]===this.__self.doc[0].activeElement}catch(e){return!1}},isDisabled:function(t){return this.hasMod(t,"disabled","yes")},val:function(t){if("undefined"==typeof t)return this._val;var e=this;return this.elem("control").each(function(n,i){return i.value===t?(e.setMod(e.__self._getRadioByElem($(i)),"checked","yes"),!1):void 0}),e},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){var t=this.elem("radio","checked","yes");return this.delMod(t,"checked").findElem(t,"control").prop("checked",!1),this._val=e,this.trigger("change",{current:e,prev:t}),this},_onLeftClick:function(t){this.isDisabled(t.data.domElem)||this.setMod(t.data.domElem,"focused","yes")},_onChange:function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"checked","yes")}},{live:function(){return this.liveBindTo("radio","leftclick tap",function(t){this._onLeftClick(t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("radio","mouseover mouseout",function(t){this.setMod(t.data.domElem,"hovered","mouseover"===t.type?"yes":"")}).liveBindTo("control","focusin focusout",function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"focused","focusin"===t.type?"yes":"")}),!1},_getRadioByElem:function(t){return t.closest(this.buildSelector("radio"))}})}(BEM),BEM.DOM.decl("radiobox",null,{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("radio","tap",function(t){this._onLeftClick(t),this._onChange(t)}),!1}}),function(t){t.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onElemSetMod:{radio:{checked:function(t,e,n){this.__base.apply(this,arguments),this.setMod(t,"pressed",n)},"next-for-pressed":{yes:function(){this.delMod(this.elem("radio","next-for-pressed","yes"),"next-for-pressed")}},pressed:{yes:function(t){this.delMod(this.elem("radio"),"pressed").setMod(t.next(),"next-for-pressed","yes")},"":function(t){this.delMod(t.next(),"next-for-pressed")}}}},_onMouseDown:function(t){var e=t.data.domElem;this.isDisabled(e)||this.hasMod(e,"checked","yes")||(this.setMod(e,"pressed","yes"),this.bindToDoc("mouseup touchend",function(t){this.afterCurrentEvent(function(){var n=this.findElem(e,"control");n.prop("checked")||(e.find(t.target).add(e).length?n.trigger("change").focus():this.delMod(e,"pressed").setMod(this.elem("radio","checked","yes"),"pressed","yes"))}),this.unbindFromDoc("mouseup touchend")}))}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("radio","mousedown",function(t){this._onMouseDown(t)}),!1}})}(BEM),function(t){var e=t.event.special.outsideclick={add:function(n){t(document).on("click."+n.guid,e.handler.bind(this))},remove:function(e){t(document).off("click."+e.guid)},handler:function(e){t.contains(this,e.target)||(e.type="outsideclick",t.event.handle.apply(this,arguments),e.type="click")}}}(jQuery),BEM.DOM.decl("attach",{onSetMod:{js:function(){this._noFileText=this.elem("text").text(),this._update({mode:"clear"}),this.bindTo("reset","click",this.resetFile)},disabled:function(t,e){this.elem("control").prop("disabled","yes"===e),this.findBlockOn("button","button").setMod("disabled",e)}},val:function(){return this.elem("control").val()},resetFile:function(){var t=this.elem("control");return t.replaceWith(BEMHTML.apply({block:"attach",elem:"control",attrs:{name:t.attr("name"),tabindex:t.attr("tabindex")}})),this.dropElemCache("control"),this.findBlockOn("button","button").dropElemCache("control"),this._update({mode:"clear"}),this.delMod(this.elem("reset"),"visibility"),this.trigger("reset")},_update:function(t){var e=this._getFileByPath(this.val()),n=this.elem("text").text();(t&&"clear"===t.mode||e&&e!==n)&&(this._setFile(e),this._setExtension(this._getExtension(e)),this.setMod(this.elem("reset"),"visibility","visible"),e&&this.trigger("change"))},_getFileByPath:function(t){return t.split("\\").pop()},_setFile:function(t){this.setMod(this.elem("holder"),"state",t?"":"hidden"),this.elem("text").text(t||this._noFileText)},_extensionsToMods:{zip:"archive",rar:"archive",tar:"archive",gz:"archive","7z":"archive",gif:"gif",jpg:"jpg",jpeg:"jpg",png:"png",eml:"eml",exe:"exe",m4a:"audio",ogg:"audio",mp3:"mp3",wav:"wav",wma:"wma",flv:"video",mov:"mov",wmv:"wmv",mp4:"mp4",avi:"avi",xls:"xls",doc:"doc",docx:"doc",txt:"txt",pdf:"pdf",ppt:"ppt"},_getExtension:function(t){return this._extensionsToMods[t.split(".").pop().toLowerCase()]||""},_setExtension:function(t){this.setMod(this.elem("holder"),"file",t||this.params.unknownType)},getDefaultParams:function(){return{unknownType:"unknown"}}},{live:function(){return this.liveBindTo("change",function(){this._update()}),!1}}),BEM.DOM.decl("attach",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._errorTip=null,this._maxSize=this.params&&this.params.maxSize||5242880,this._extensions=this.params&&this.params.extensions||["PDF","JPG","JPEG","PNG"];var t=this;this._checkSize(),this._checkExtension(),this.on("change",function(){t._checkSize(),t._checkExtension()}),this._hideTipOnClick()}},_checkSize:function(){var t=this.findElem("control"),e=t[0].files[0]&&t[0].files[0].size;e>this._maxSize&&(this.resetFile(),this.showErrorTip("limit-exceeded"))},_checkExtension:function(){var t=this.findElem("control"),e=t[0].files[0],n=this.val(),i=n.split(".").pop().toUpperCase(),o=_.contains(this._extensions,i);e&&!o&&(this.resetFile(),this.showErrorTip("invalid-extension"))},_hideTipOnClick:function(){var t=this;t.domElem.on("click",function(){t._errorTip&&t.hideErrorTip()})},hideErrorTip:function(){this._errorTip.delMod("shown")},showErrorTip:function(t){this._showErrorTip(t)},_showErrorTip:function(t){var t=t||"upload-error";if(!this._errorTip){var e=BEMHTML.apply({block:"tooltip",mods:{theme:"error",size:"m",autoclosable:"yes","watch-scroll":"no"},js:{offset:3,directions:["right"],axis:"middle"},content:[{elem:"tail"}]}),n=$(e).insertBefore(this.domElem);BEM.DOM.init(n),this._errorTip=n.bem("tooltip"),this._errorTip.setOwner(this)}this._errorTip._getPopup().setContent(BEM.I18N("attach",t)),this._errorTip.setMod("shown","yes")}}),BEM.DOM.decl("label",{onSetMod:{js:function(){this.__base.apply(this,arguments)},disabled:{yes:function(){this.domElem.attr("for","")},"":function(){this.domElem.attr("for",this.params["for"])}}}}),BEM.DOM.decl({name:"popup",modName:"custom",modVal:"iframe-showcase"},{onSetMod:{visibility:function(){this.__base.apply(this,arguments),this._adjustPopup()}},_adjustPopup:function(){var t=this,e=this.findBlockOutside("b-page").domElem.width(),n=t.domElem.offset().left,i=n+t.domElem.width();i>e-25&&(t.domElem.width(e-25-n),this.repaint())}}),BEM.DOM.decl("fieldset",{onSetMod:{js:function(){this._supportedControls=["input","select"],this._bLabel=this.findBlockInside("label"),this._controlsList=this._getControlsList(),this._bLabel&&this._onLabelClick()}},_onLabelClick:function(){var t=this,e=t._controlsList;this._bLabel.domElem.on("click",function(){var n=_.find(e,function(t){return t.val()?void 0:t}),i=n?n:e[0];t._setFocus(i)})},_getControlsList:function(){var t=this,e=this.domElem[0].children,n=t._supportedControls,i=[];return _(e).forEach(function(t){var e=$(t);_.find(n,function(t){e.hasClass(t)&&i.push(e.bem(t))})}),i},_setFocus:function(t){var e="select"===t.__self.getName();e?(t._getButton().setMod("focused","yes"),t.open()):t.setMod("focused","yes")}}),BEM.DOM.decl({name:"input",modName:"type",modVal:"bank-bik"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._checkBikOnBlur()}},_checkBikOnBlur:function(){var t=this;t.on("blur",function(){var e=t._checkBik();t.toggleMod("validation","failed","yes",!e)})},_checkBik:function(){var t=this.val(),e="044579444"===t,n=!0;return t.length<9&&(this.showErrorTip(BEM.I18N("input","bik-empty")),n=!1),e&&(this.showErrorTip(BEM.I18N("input","illegal-bank-bik")),n=!1),n}}),BEM.DOM.decl("island",{onSetMod:{js:function(){this.__base.apply(this,arguments)}}},{live:function(){this.liveBindTo("delete","click",function(t){$(t.target).closest(".island__section_behavior_removable").remove()})}}),BEM.DOM.decl({name:"input",modName:"check",modVal:"yacard"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t,e=this.params.check.yacard,n=this;this.on("blur",function(){t=n.val(),t=t.replace(/\D/g,""),ym&&_.isFunction(ym.textUtils.checkCardNumber)&&ym.textUtils.checkCardNumber(t)&&(n._checkYaCardByCardNumber(t)?n.showHintTip({theme:e.hintTheme,content:e.message}):n.hideHintTip())})}},_yaCardCheckRanges:[{start:"5483874040000000",end:"5483874099999999"},{start:"5189010003000000",end:"5189010004999999"},{start:"5189010006000000",end:"5189010007999999"}],_checkYaCardByCardNumber:function(t){return _.some(this._yaCardCheckRanges,function(e){return t.length===e.start.length&&e.start<=t&&t<=e.end})}}),BEM.DOM.decl({name:"terms-and-conditions"},{onSetMod:{js:function(){this._initToggler()}},_initToggler:function(){var t=this.elem("toggler"),e=this.elem("full");t.length&&e.length&&t.on("click",function(){return e.slideToggle(),!1})}}),BEM.DOM.decl({name:"scroll",modName:"type",modVal:"vertical"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._bPage=this.findBlockOutside("b-page"),this._top=this.domElem.offset().top,this._bottom=this._top+this.domElem.height(),this.bindTo("scroll",this._onScroll)}},_onScroll:function(){var t=this,e=this._bPage.findBlocksInside("popup");e.length&&$.each(e,function(e,n){if(n._isShown&&!n._isHiding){var i=n._owner,o=i.offset().top,s=o+i.height();(o<t._top||s>t._bottom)&&n.hide(),t._bPage.trigger("change")}})}}),BEM.DOM.decl({name:"error",modName:"reach-goal",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.params.yametricsGoal;t&&this.findBlockOutside("b-page").findBlockInside("stat-scripts").customYandexMetricsGoal(t)}}}),BEM.DOM.decl({name:"phone-number"},{onSetMod:{js:function(){this.prefix=this.findBlockOn("prefix","input"),this.number=this.findBlockOn("number","input"),this.form=this.findBlockOutside("form"),this.numberValidated=!1,this.canContinueToExternalValidation=!1,this.prefix.bindTo("control","keypress change keyup",this._phoneNumberHandler),this.number.bindTo("control","keypress change keyup",this._phoneNumberHandler),this.findBlockOutside("form").on("beforeSubmit",this._beforeFormSubmit,this),7===this.number.val().length&&3===this.prefix.val().length&&this._getPhoneOperator()}},_phoneNumberHandler:function(t){var e=this.findBlockOutside("phone-number"),n=e._getKey(t);this.domElem.hasClass("phone-number__prefix")&&3===this.val().length&&"keyup"===t.type&&9!==n&&16!==n&&e.number.elem("control").trigger("click"),this.domElem.hasClass("phone-number__number")&&"keyup"===t.type&&0===this.val().length&&8===n&&e.prefix.elem("control").trigger("click"),7===e.number.val().length&&3===e.prefix.val().length?e.numberValidated||e._getPhoneOperator():(e.number.hideErrorTip(),e.numberValidated=!1)},_checkFullNumberBeforeSubmit:function(){return this.prefix.val().length<3?(this.number.showErrorTip(this.number.params.errorWrongPrefix),!1):this.number.val().length<7?!0:this.canContinueToExternalValidation},_getKey:function(t){var e={63275:35,63273:36,63234:37,63235:39,63272:46},n=t.keyCode||t.charCode,i=$.browser.safari?e[n]||n:n;return i>=96&&105>=i&&(i-=48),i},_getPhoneOperator:function(){var t=this,e=t.number;t.numberValidated=!0,$.get("/internal/get-phone-provider-data",{"phone-number":t.number.val(),"phone-prefix":t.prefix.val()},function(n){var i=n.lanternBlock;i&&t.form.drawLantern({content:i.content}),t.form.toggleDisableButton(n.disablePayment);var o=t.findBlockOutside("page-layout").findBlockInside("title").findBlockInside("image").domElem;if(t.canContinueToExternalValidation=n.scid&&!0,n.scid){o.prop("src","/i/shop/"+n.logo);var s=t.findBlockOutside("form").findBlockInside($(".form__control_type_iframe-showcase-sum"),"input");s.params.validationRules=_.map(s.params.validationRules,function(t){return"sum"===t.type?_.merge(t,n.validate):t})}else if(n.error)switch(o.prop("src","/i/empty.gif"),n.error){case"invalid_phone_prefix":e.showErrorTip(e.params.errorWrongPrefix);break;case"phone_number_range_missing":case"phone_number_scid_missing":case"invalid_phone_number":var r={tag:"",content:[e.params.errorScidMissing,"&#160;",{block:"link",url:"/shops-phone.xml?ctid=157291&shops-phone-list=show&geoa=1#toggle-shops-list",target:"_blank",content:e.params.errorScidMissingLink},"."]};e.showErrorTip(BEMHTML.apply(r))}},"json")},_beforeFormSubmit:function(t,e){this._checkFullNumberBeforeSubmit()||e.originalEvent.preventDefault()}}),BEM.DOM.decl("hint",{onSetMod:{js:function(){this._popup=null,this.bindTo("click",this._onClick)}},_onClick:function(){var t=this.params.message;if(!this._popup){var e=BEMHTML.apply({block:"popup",mods:{theme:"ffffff",adaptive:"yes","watch-scroll":"no",autoclosable:"yes",type:"hint"},js:{directions:{to:"top",axis:"left",tail:{axis:"center"},offset:{left:-25,top:-3}}},content:[{elem:"tail"},{elem:"content"}]}),n=$(e).insertBefore(this.domElem);BEM.DOM.init(n),this._popup=n.bem("popup")}t&&this._popup.setContent(t),this._popup.toggle(this.domElem)}}),BEM.DOM.decl({name:"form",modName:"id",modVal:"joinups"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._onChangeWithoutSite(),this._onChangeCountry(),this._onChangeBusinessEntity(),this._onClickUpdateCaptcha(),this._onClickPlayCaptcha()}},_onClickPlayCaptcha:function(){var t=this,e=t.elem("control","name","captchaPlay"),n=this.elem("control","name","captchaVoiceIntro"),i=this.elem("control","name","captchaVoice"),o=n.length?n.bem("audio"):null,s=i.length?i.bem("audio"):null,r=function(){o.play()},a=function(){s.ended()&&s.reload(),s.play()};e.length&&o&&s&&(e.bem("link").on("click",r),o.on("end",a))},_onClickUpdateCaptcha:function(){var t=this,e=t.elem("control","name","captchaUpdate"),n=function(){t._updateCaptcha()};e.bem("link").on("click",n)},_updateCaptcha:function(){var t=this,e=t.elem("control","name","captcha"),n=t.elem("control","name","captchaVoice"),i=n.length?n.bem("audio"):null,o=$('input[name="captchaKey"]');$.ajax({type:"POST",data:{trackId:t.params.trackId,voice:!0},url:t.params.generateCaptchaUrl,dataType:"json",success:function(t){"ok"===t.status&&(o.val(t.key),e.attr("src",t.image_url),t.voice&&t.voice.url&&i&&i.setUrl(t.voice.url))}})},_onChangeWithoutSite:function(){var t=this.elem("control","name","shopUrl").bem("input"),e=this.elem("control","name","noShopUrl").bem("checkbox");e.on("change",function(){t.toggleMod("disabled","yes",this.isChecked()).hideErrorTip()})},_onChangeCountry:function(){var t=this,e=t.elem("control","name","shopCountryIsoCode").bem("select"),n=t.elem("control","name","itn").bem("input"),i=n.domElem.closest(".form__item");"643"!==e.val()&&(t.setMod(i,"hidden","yes"),n.setMod("disabled","yes")),e.on("change",function(){var e="643"===this.val();t.toggleMod(i,"hidden","yes",!e),n.toggleMod("disabled","yes",!e).hideErrorTip(),t.refreshPage()})},_onChangeBusinessEntity:function(){var t=this.elem("control","name","businessEntity").bem("select"),e=this.elem("control","name","itn").bem("input"),n=$.grep(e.params.validationRules,function(t){return"itn"===t.type})[0].params;n.businessEntity=t.val(),t.on("change",function(){n.businessEntity=this.val()})},_getAjaxErrorResultBemjson:function(){return this.findBlockOutside("b-page").findBlockInside("stat-scripts").customYandexMetricsGoal("JOINUPS_ERROR"),{block:"result",mods:{status:"error"},content:[{elem:"title",content:BEM.I18N("page-layout","error-title")},{elem:"content",content:[{block:"paragraph",content:BEM.I18N("page-layout","some-reason-joinups-fail")},{block:"paragraph",content:[BEM.I18N("page-layout","if-fail-again"),"&#160;",{block:"link",url:"mailto:merchants@money.yandex.ru",content:BEM.I18N("page-layout","write-to-us")},"&#160;",BEM.I18N("page-layout","we-fix-this")]}]},{elem:"action",content:{block:"button",mods:{theme:"action",size:"m"},url:this.params.formUrl||"",content:BEM.I18N("page-layout","to-try-joinups-again")}}]}}}),BEM.DOM.decl({name:"form",modName:"ajax",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._validationErrorMessage=BEM.I18N("form","wrong-format-field"),this._paranja=this.elem("paranja").bem("paranja"),this._spinnerParanja="",this._handleHistoryChange()},faded:{yes:function(){this._paranja.open()},"":function(){this._paranja.close()}}},_handleHistoryChange:function(){var t=this;window.addEventListener("popstate",function(e){t.updateContent(e.state)})},sendAjaxRequest:function(){var t=this,e=!1;t.setMod("faded","yes"),$.ajax({type:t.domElem.attr("method").toUpperCase()||"POST",data:t.domElem.serialize(),url:t.params.ajaxUrl||t.domElem.attr("action"),dataType:"json",complete:function(){t.domElem&&!e&&(t.delMod("faded"),t._spinnerParanja&&t._spinnerParanja.close())},success:function(n){if("success"===n.status){var i=t.params.ajaxSuccessRedirectUrl;i?window.location=i:t._showAjaxSuccessResult()}else if("error"===n.status&&n.errors&&n.errors.validationErrors&&n.errors.validationErrors.fields)t._showValidationErrors(n.errors.validationErrors.fields);else if("error"===n.status&&n.errors)for(errorType in n.errors)switch(errorType){case"bad_yandex_login":t._showValidationErrors({login:"bad_yandex_login"});break;case"bad_yandex_password":t._showValidationErrors({password:"bad_yandex_password"});break;case"captcha_failed":t._showValidationErrors({captchaResponse:"captcha_failed"}),t._updateCaptcha();break;case"unable_to_create_passport_user":t._showAjaxErrorResult();break;default:t._showAjaxErrorResult()}else"progress"===n.status?(e=!0,t._spinnerParanja||t._startSpinner(),window.setTimeout(function(){t.sendAjaxRequest()},3e3)):t._showAjaxErrorResult()},error:function(){t._showAjaxErrorResult()}})},_startSpinner:function(){var t=this,e=BEMHTML.apply({block:"paranja",mods:{theme:"spinner"}}),n=$(e).appendTo(t.findBlockOutside("b-page").domElem);BEM.DOM.init(n),t._spinnerParanja=n.bem("paranja"),t._spinnerParanja.open()},_showValidationErrors:function(t){var e=this;$.each(t,function(t){var n=$('input[name="'+t+'"]').closest(".input");n.length&&n.each(function(){var t=$(this).bem("input"),n=t.hasMod("disabled"),i=$(this).is(":visible");!n&&i&&t.showErrorTip(e._validationErrorMessage)})})},_showAjaxSuccessResult:function(){var t=BEMHTML.apply(this._getAjaxSuccessResultBemjson()),e={mainContent:t};this.bPageLayout.hasMod("type","three-column")&&(e.rightColumn=""),history.pushState(e,null,"#success"),this.updateContent(e)},_showAjaxErrorResult:function(){var t=BEMHTML.apply(this._getAjaxErrorResultBemjson()),e={mainContent:t};this.bPageLayout.hasMod("type","three-column")&&(e.rightColumn=""),history.pushState(e,null,"#error"),this.updateContent(e)},_getDefaultAjaxErrorResultBemjson:function(t){var e=BEM.I18N("form","something-failed"),n=[{block:"paragraph",content:BEM.I18N("form","some-reason-fail")}],i=[{block:"button",mods:{theme:"action",size:"m"},url:t||"",content:BEM.I18N("form","back-to-questionnaire")},"&#160;&#160;",{block:"button",mods:{size:"m"},url:"/feedback",content:BEM.I18N("form","move-to-helpdesk")}];
return{block:"result",mods:{status:"error"},content:[{elem:"title",content:e},{elem:"content",content:n},{elem:"action",content:i}]}}}),BEM.DOM.decl({name:"form",modName:"disabled",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.disable()}}}),BEM.DOM.decl("progress-indicator",{onSetMod:{js:function(){this._slider=this.elem("slider")}},update:function(t){if(t.status&&this.setMod(this._slider,"status",t.status),_.isNumber(t.value)){var e=t.value>100?100:t.value;this._slider.width(e+"%"),this.setMod(this._slider,"value",e)}},getStatus:function(){return this.getMod(this._slider,"status")},getWidth:function(){return parseInt(this.getMod(this._slider,"value"))}}),BEM.DOM.decl("audio",{onSetMod:{js:function(){this._onEnded()}},_onEnded:function(){var t=this,e=function(e){e.preventDefault(),t.trigger("end")};this.domElem.on("ended",e)},play:function(){this.domElem.get(0).play()},reload:function(){this.domElem.get(0).load()},ended:function(){return this.domElem.get(0).ended},setUrl:function(t){this.domElem.attr("src",t)}}),BEM.DOM.decl("paranja",{onSetMod:{js:function(){var t=this;$(t.params.rel).each(function(){$(this.elem||t.domElem).on(this.event,t[this.method].bind(t))}),this.bindTo("leftclick tap",function(){this.trigger("click")})},state:{open:function(){this.trigger("open")},close:function(){this.trigger("close")}}},open:function(){this.setMod("state","open")},close:function(){this.setMod("state","close")}},{live:!1}),function(){var t="background-position",e="0 -",n=!1,i="animation",o="islands-spin",s="transform",r="sprite";!function(){var o=document.createElement("img");void 0!==o.style["background-position-y"]&&(t="background-position-y",e="-");var s="Webkit Moz O ms Khtml".split(" ");if(void 0!==o.style.animationName)n=!0;else for(var r=0;r<s.length;r++){var a=s[r];if(void 0!==o.style[a+"AnimationName"]){i="-"+a.toLowerCase()+"-animation",n=!0;break}}}(),BEM.DOM.decl("spin",{getDefaultParams:function(){return{animation:s,startDelay:0,frameAngle:10,frameTime:27,frames:36}},onSetMod:{js:function(){n||(this.params.animation=r),this.params.animation===r&&(this._size=parseInt(this.getMod("size")||/[\d]+/.exec(this.getMod("theme"))[0],10),this._height=this._size*this.params.frames,this._curFrame=0,this.setMod("support-transforms","no")),this.hasMod("progress","yes")&&this._startSpin()},progress:{yes:function(){this._startSpin()},"":function(){this._stopSpin()}}},_startSpin:function(){var t=function(){if(this.hasMod("progress","yes")&&!this._interval)switch(this.params.animation){case s:var t=o+" "+Math.floor(360*this.params.frameTime/this.params.frameAngle)+"ms infinite linear";this.elem("icon").css(i,t);break;case r:this._interval=setInterval(this._switchFrame.bind(this),this.params.frameTime)}}.bind(this);this._delayTimeout=setTimeout(t,this.params.startDelay)},_stopSpin:function(){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._interval&&(clearInterval(this._interval),delete this._interval)},_switchFrame:function(){var n=++this._curFrame,i=n*this._size;i>=this._height&&(this._curFrame=i=0),this.elem("icon").css(t,e+i+"px")},destruct:function(){this._stopSpin(),this.__base.apply(this,arguments)}})}(),BEM.DOM.decl("input",{onSetMod:{disabled:function(t,e){this.__base.apply(this,arguments),this.findBlocksInside(this.elem("samples"),"link").forEach(function(n){n.setMod(t,e)})}},_onSampleClick:function(t){var e=t.target.domElem,n=this.elemParams(e);this.val("val"in n?n.val:e.text(),{source:"sample"})}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnBlockInsideEvent("click","link",function(t){-1!==this.elem("sample").index(t.block.domElem)&&this._onSampleClick(t)})}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments)}}},{live:function(){return this.liveInitOnBlockInsideEvent("click","link",function(t){-1!==this.findElem("sample").index(t.block.domElem)&&(this._onSampleClick(t),this.hideErrorTip(),"failed"===this.getMod("validation")&&this.setMod("validation","yes"))}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("menu",{onElemSetMod:{disabled:{yes:function(){var t=this.findElem("link","disabled","yes");this.on("click",t,function(){return!1})}}}}),BEM.DOM.decl({name:"link",modName:"has-hint",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t="click";this._tooltip=null,this.on(t,this.toggleTip)}},toggleTip:function(){this._tooltip&&this._tooltip.hasMod("shown","yes")?this.hideTip():this.showTip({theme:"ffffff"})},showTip:function(t){var e=this.params;this._showTip({type:"hint",theme:e.theme||t.theme||"ffffff",content:e.hintMessage||t.hintMessage})},hideTip:function(){this._hideTip({type:"hint"})},_showTip:function(t){var e=t.type,n=t.content;if(!this._tooltip){var i=t.theme||"ffffff",o="error"===e?"no":"yes",s=this.hasMod("customTip")?this.getMod("customTip"):"",r=this.params.tipOffset||0,a=this.params.watchScroll?"yes":"no",c=BEMHTML.apply({block:"tooltip",mods:{theme:i,size:"ml",autoclosable:o,"watch-scroll":a,custom:s},js:{offset:r,directions:this.params.tipDirections||["right"],axis:"right"},content:[{elem:"tail"},n]}),u=$(c).insertBefore(this.domElem);BEM.DOM.init(u),this._tooltip=u.bem("tooltip")}n&&this._tooltip._getPopup().setContent(n),this._tooltip.setOwner($(this.elem("inner"))).setMod("shown","yes")},_hideTip:function(){this._tooltip&&this._tooltip.delMod("shown")}}),function(){BEM.DOM.decl("promo-charity",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._btn=this.findBlockInside("button"),this.bindTo("mouseleave",this._onMouseLeave)}},_onMouseOver:function(){this._btn.setMod("theme","action")},_onMouseLeave:function(){this._btn.setMod("theme","normal")}},{live:function(){return this.liveBindTo("mouseover",function(){this._onMouseOver()}),this.__base.apply(this,arguments)}})}(jQuery),BEM.DOM.decl("i-global",{onSetMod:{js:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,$(function(){t.oframebust&&Lego.oframebust(t.oframebust)})}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"//pass.yandex.ru","social-host":"//social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t){return(this._params||{})[t]}});